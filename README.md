# CloudPaste - åœ¨çº¿å‰ªè´´æ¿ ğŸ“‹

<div align="center">
    <p>
    <a href="README.md">ä¸­æ–‡</a> | <a href="README_EN.md">English</a>
    </p>
    <img width="100" height="100" src="https://img.icons8.com/dusk/100/paste.png" alt="paste"/>
    <h3>åŸºäº Cloudflare çš„åœ¨çº¿å‰ªè´´æ¿å’Œæ–‡ä»¶åˆ†äº«æœåŠ¡ï¼Œæ”¯æŒ Markdown ç¼–è¾‘å’Œæ–‡ä»¶ä¸Šä¼ </h3>
</div>

<p align="center">
  <a href="#-å±•ç¤º">ğŸ“¸ å±•ç¤º</a> â€¢
  <a href="#-ç‰¹ç‚¹">âœ¨ ç‰¹ç‚¹</a> â€¢
  <a href="#-éƒ¨ç½²æ•™ç¨‹">ğŸš€ éƒ¨ç½²æ•™ç¨‹</a> â€¢
  <a href="#-æŠ€æœ¯æ ˆ">ğŸ”§ æŠ€æœ¯æ ˆ</a> â€¢
  <a href="#-å¼€å‘">ğŸ’» å¼€å‘</a> â€¢
  <a href="#-è®¸å¯è¯">ğŸ“„ è®¸å¯è¯</a>
</p>

## ğŸ“¸ å±•ç¤º

<table align="center">
  <tr>
    <td><img src="./images/image-1.png" width="400"/></td>
    <td><img src="./images/image-2.png" width="400"/></td>
  </tr>
  <tr>
    <td><img src="./images/image-3.png" width="400"/></td>
    <td><img src="./images/image-4.png" width="400"/></td>
  </tr>
  <tr>
    <td><img src="./images/image-5.png" width="400"/></td>
    <td><img src="./images/image-en1.png" width="400"/></td>
  </tr>
</table>

## âœ¨ ç‰¹ç‚¹

### ğŸ“ Markdown ç¼–è¾‘ä¸åˆ†äº«

- **å¼ºå¤§çš„ç¼–è¾‘å™¨**ï¼šé›†æˆ [Vditor](https://github.com/Vanessa219/vditor)ï¼Œæ”¯æŒ GitHub é£æ ¼çš„ Markdownã€æ•°å­¦å…¬å¼ã€æµç¨‹å›¾ã€æ€ç»´å¯¼å›¾ç­‰
- **å®‰å…¨åˆ†äº«**ï¼šå†…å®¹å¯è®¾ç½®è®¿é—®å¯†ç ä¿æŠ¤
- **çµæ´»æ—¶æ•ˆ**ï¼šæ”¯æŒè®¾ç½®å†…å®¹è¿‡æœŸæ—¶é—´
- **è®¿é—®æ§åˆ¶**ï¼šå¯é™åˆ¶æœ€å¤§æŸ¥çœ‹æ¬¡æ•°
- **ä¸ªæ€§åŒ–**ï¼šè‡ªå®šä¹‰åˆ†äº«é“¾æ¥åŠå¤‡æ³¨
- **æ”¯æŒæ–‡æœ¬ Raw ç›´é“¾**ï¼šç±»ä¼¼ gihub çš„ Raw ç›´é“¾ï¼Œç”¨äº yaml é…ç½®æ–‡ä»¶æ¥å¯åŠ¨çš„æœåŠ¡
- **å¤šæ ¼å¼å¯¼å‡º**ï¼šæ”¯æŒ PDFã€Markdownã€HTMLã€PNG å›¾ç‰‡ã€Word æ–‡æ¡£ å¯¼å‡º
- **ä¾¿æ·åˆ†äº«**ï¼šä¸€é”®å¤åˆ¶åˆ†äº«é“¾æ¥å’Œç”ŸæˆäºŒç»´ç 
- **è‡ªåŠ¨ä¿å­˜**ï¼šæ”¯æŒè‡ªåŠ¨ä¿å­˜è‰ç¨¿åŠŸèƒ½

### ğŸ“¤ æ–‡ä»¶ä¸Šä¼ ä¸ç®¡ç†

- **å¤šå­˜å‚¨æ”¯æŒ**ï¼šå…¼å®¹å¤šç§ S3 å­˜å‚¨æœåŠ¡ (Cloudflare R2ã€Backblaze B2ã€AWS S3 ç­‰)
- **å­˜å‚¨é…ç½®**ï¼šå¯è§†åŒ–ç•Œé¢é…ç½®å¤šä¸ªå­˜å‚¨ç©ºé—´ï¼Œçµæ´»åˆ‡æ¢é»˜è®¤å­˜å‚¨æº
- **é«˜æ•ˆä¸Šä¼ **ï¼šé€šè¿‡é¢„ç­¾å URL ç›´æ¥ä¸Šä¼ è‡³ S3 å­˜å‚¨ï¼Œå¤šæ–‡ä»¶ä¸Šä¼ 
- **å®æ—¶åé¦ˆ**ï¼šä¸Šä¼ è¿›åº¦å®æ—¶æ˜¾ç¤º
- **è‡ªå®šä¹‰é™åˆ¶**ï¼šå•æ¬¡ä¸Šä¼ é™åˆ¶å’Œæœ€å¤§å®¹é‡é™åˆ¶
- **å…ƒæ•°æ®ç®¡ç†**ï¼šæ–‡ä»¶å¤‡æ³¨ã€å¯†ç ã€è¿‡æœŸæ—¶é—´ã€è®¿é—®é™åˆ¶
- **æ•°æ®åˆ†æ**ï¼šæ–‡ä»¶è®¿é—®ç»Ÿè®¡ä¸è¶‹åŠ¿åˆ†æ
- **æœåŠ¡å™¨ç›´ä¼ **ï¼šæ”¯æŒè°ƒæ¥å£è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ç­‰æ“ä½œ

### ğŸ›  ä¾¿æ·çš„æ–‡ä»¶/æ–‡æœ¬æ“ä½œ

- **ç»Ÿä¸€ç®¡ç†**ï¼šæ”¯æŒæ–‡ä»¶/æ–‡æœ¬åˆ›å»ºã€åˆ é™¤å’Œå±æ€§ä¿®æ”¹
- **åœ¨çº¿é¢„è§ˆ**ï¼šå¸¸è§æ–‡æ¡£ã€å›¾ç‰‡å’Œåª’ä½“æ–‡ä»¶çš„åœ¨çº¿é¢„è§ˆä¸ç›´é“¾ç”Ÿæˆ
- **åˆ†äº«å·¥å…·**ï¼šç”ŸæˆçŸ­é“¾æ¥å’ŒäºŒç»´ç ï¼Œä¾¿äºè·¨å¹³å°åˆ†äº«
- **æ‰¹é‡ç®¡ç†**ï¼šæ–‡ä»¶/æ–‡æœ¬æ‰¹é‡æ“ä½œä¸æ˜¾ç¤º

### ğŸ”„ WebDAV å’ŒæŒ‚è½½ç‚¹ç®¡ç†

- **WebDAV åè®®æ”¯æŒ**ï¼šé€šè¿‡æ ‡å‡† WebDAV åè®®è®¿é—®å’Œç®¡ç†æ–‡ä»¶ç³»ç»Ÿ
- **ç½‘ç»œé©±åŠ¨å™¨æŒ‚è½½**ï¼šæ”¯æŒ éƒ¨åˆ†ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯ç›´æ¥æŒ‚è½½
- **çµæ´»çš„æŒ‚è½½ç‚¹**ï¼šæ”¯æŒåˆ›å»ºå¤šä¸ªæŒ‚è½½ç‚¹ï¼Œè¿æ¥ä¸åŒçš„å­˜å‚¨æœåŠ¡
- **æƒé™æ§åˆ¶**ï¼šç²¾ç»†çš„æŒ‚è½½ç‚¹è®¿é—®æƒé™ç®¡ç†
- **API å¯†é’¥é›†æˆ**ï¼šé€šè¿‡ API å¯†é’¥æˆæƒ WebDAV è®¿é—®
- **å¤§æ–‡ä»¶æ”¯æŒ**ï¼šè‡ªåŠ¨ä½¿ç”¨åˆ†ç‰‡ä¸Šä¼ æœºåˆ¶å¤„ç†å¤§æ–‡ä»¶
- **ç›®å½•æ“ä½œ**ï¼šå®Œæ•´æ”¯æŒç›®å½•åˆ›å»ºã€ä¸Šä¼ ã€åˆ é™¤ã€é‡å‘½åç­‰æ“ä½œ

### ğŸ” è½»é‡æƒé™ç®¡ç†

#### ç®¡ç†å‘˜æƒé™æ§åˆ¶

- **ç³»ç»Ÿç®¡ç†**ï¼šå…¨å±€ç³»ç»Ÿè®¾ç½®é…ç½®
- **å†…å®¹å®¡æ ¸**ï¼šæ‰€æœ‰ç”¨æˆ·å†…å®¹çš„ç®¡ç†
- **å­˜å‚¨ç®¡ç†**ï¼šS3 å­˜å‚¨æœåŠ¡çš„æ·»åŠ ã€ç¼–è¾‘ä¸åˆ é™¤
- **æƒé™åˆ†é…**ï¼šAPI å¯†é’¥çš„åˆ›å»ºä¸æƒé™ç®¡ç†
- **æ•°æ®åˆ†æ**ï¼šå®Œæ•´çš„ç»Ÿè®¡æ•°æ®è®¿é—®

#### API å¯†é’¥æƒé™æ§åˆ¶

- **æ–‡æœ¬æƒé™**ï¼šåˆ›å»º/ç¼–è¾‘/åˆ é™¤æ–‡æœ¬å†…å®¹
- **æ–‡ä»¶æƒé™**ï¼šä¸Šä¼ /ç®¡ç†/åˆ é™¤æ–‡ä»¶
- **å­˜å‚¨æƒé™**ï¼šå¯é€‰æ‹©ç‰¹å®šçš„å­˜å‚¨é…ç½®
- **è¯»å†™åˆ†ç¦»**ï¼šå¯è®¾ç½®åªè¯»æˆ–è¯»å†™æƒé™
- **æ—¶æ•ˆæ§åˆ¶**ï¼šè‡ªå®šä¹‰æœ‰æ•ˆæœŸï¼ˆä»å°æ—¶åˆ°æœˆï¼‰
- **å®‰å…¨æœºåˆ¶**ï¼šè‡ªåŠ¨å¤±æ•ˆä¸æ‰‹åŠ¨æ’¤é”€åŠŸèƒ½

### ğŸ’« ç³»ç»ŸåŠŸèƒ½

- **é€‚é…æ€§å¼º**ï¼šå“åº”å¼è®¾è®¡ï¼Œé€‚é…ç§»åŠ¨è®¾å¤‡å’Œæ¡Œé¢
- **å¤šè¯­è¨€**ï¼šä¸­/è‹±æ–‡åŒè¯­ç•Œé¢æ”¯æŒ
- **è§†è§‰æ¨¡å¼**ï¼šæ˜äº®/æš—é»‘ä¸»é¢˜åˆ‡æ¢
- **å®‰å…¨è®¤è¯**ï¼šåŸºäº JWT çš„ç®¡ç†å‘˜è®¤è¯ç³»ç»Ÿ
- **ç¦»çº¿ä½“éªŒ**ï¼šPWA æ”¯æŒï¼Œå¯ç¦»çº¿ä½¿ç”¨å’Œå®‰è£…åˆ°æ¡Œé¢

## ğŸš€ éƒ¨ç½²æ•™ç¨‹

### å‰æœŸå‡†å¤‡

åœ¨å¼€å§‹éƒ¨ç½²å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²å‡†å¤‡ä»¥ä¸‹å†…å®¹ï¼š

- [ ] [Cloudflare](https://dash.cloudflare.com) è´¦å·ï¼ˆå¿…éœ€ï¼‰
- [ ] å¦‚ä½¿ç”¨ R2ï¼šå¼€é€š **Cloudflare R2** æœåŠ¡å¹¶åˆ›å»ºå­˜å‚¨æ¡¶ï¼ˆéœ€ç»‘å®šæ”¯ä»˜æ–¹å¼ï¼‰
- [ ] å¦‚ä½¿ç”¨ Vercelï¼šæ³¨å†Œ [Vercel](https://vercel.com) è´¦å·
- [ ] å…¶ä»– S3 å­˜å‚¨æœåŠ¡çš„é…ç½®ä¿¡æ¯ï¼š
   - `S3_ACCESS_KEY_ID`
   - `S3_SECRET_ACCESS_KEY`
   - `S3_BUCKET_NAME`
   - `S3_ENDPOINT`

<details>
<summary><b>ğŸ‘‰ æŸ¥çœ‹å®Œæ•´éƒ¨ç½²æ•™ç¨‹</b></summary>

### ğŸ“‘ ç›®å½•

- [Action è‡ªåŠ¨éƒ¨ç½²](#Actionè‡ªåŠ¨éƒ¨ç½²:)
   - [åç«¯è‡ªåŠ¨éƒ¨ç½²](#åç«¯è‡ªåŠ¨éƒ¨ç½²)
   - [å‰ç«¯è‡ªåŠ¨éƒ¨ç½²](#å‰ç«¯è‡ªåŠ¨éƒ¨ç½²)
- [æ‰‹åŠ¨éƒ¨ç½²](#æ‰‹åŠ¨éƒ¨ç½²:)
   - [åç«¯æ‰‹åŠ¨éƒ¨ç½²](#åç«¯æ‰‹åŠ¨éƒ¨ç½²)
   - [å‰ç«¯æ‰‹åŠ¨éƒ¨ç½²](#å‰ç«¯æ‰‹åŠ¨éƒ¨ç½²)

---

## Action è‡ªåŠ¨éƒ¨ç½²:

ä½¿ç”¨ GitHub Actions å¯ä»¥å®ç°ä»£ç æ¨é€åè‡ªåŠ¨éƒ¨ç½²åº”ç”¨ã€‚

### é…ç½® GitHub ä»“åº“

1. Fork æˆ–å…‹éš†ä»“åº“ [https://github.com/ling-drag0n/CloudPaste](https://github.com/ling-drag0n/CloudPaste)
2. è¿›å…¥æ‚¨çš„ GitHub ä»“åº“è®¾ç½®
3. è½¬åˆ° Settings â†’ Secrets and variables â†’ Actions â†’ New Repository secrets
4. æ·»åŠ ä»¥ä¸‹ Secretsï¼š

| Secret åç§°             | å¿…éœ€ | ç”¨é€”                                                  |
| ----------------------- | ---- | ----------------------------------------------------- |
| `CLOUDFLARE_API_TOKEN`  | âœ…   | Cloudflare API ä»¤ç‰Œï¼ˆéœ€è¦ Workersã€D1 å’Œ Pages æƒé™ï¼‰ |
| `CLOUDFLARE_ACCOUNT_ID` | âœ…   | Cloudflare è´¦æˆ· ID                                    |
| `ENCRYPTION_SECRET`     | âŒ   | ç”¨äºåŠ å¯†æ•æ„Ÿæ•°æ®çš„å¯†é’¥ï¼ˆå¦‚ä¸æä¾›ï¼Œå°†è‡ªåŠ¨ç”Ÿæˆï¼‰        |

#### è·å– Cloudflare API ä»¤ç‰Œ

1. è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com/profile/api-tokens)
2. åˆ›å»ºæ–°çš„ API ä»¤ç‰Œ
3. é€‰æ‹©"ç¼–è¾‘ Cloudflare Workers"æ¨¡æ¿ï¼Œå¹¶æ·»åŠ  D1 æ•°æ®åº“ç¼–è¾‘æƒé™

### åç«¯è‡ªåŠ¨éƒ¨ç½²

Fork ä»“åº“ï¼Œå¡«å¥½å¯†é’¥ï¼Œç„¶åè¿è¡Œå·¥ä½œæµ!!!
æ¯å½“ `backend` ç›®å½•ä¸­çš„æ–‡ä»¶æœ‰æ›´æ”¹å¹¶æ¨é€åˆ° `main` æˆ– `master` åˆ†æ”¯æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ã€‚å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š

1. **è‡ªåŠ¨åˆ›å»º D1 æ•°æ®åº“**ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
2. **ç”¨ schema.sql åˆå§‹åŒ–æ•°æ®åº“**ï¼ˆåˆ›å»ºè¡¨å’Œåˆå§‹æ•°æ®ï¼‰
3. **è®¾ç½® ENCRYPTION_SECRET ç¯å¢ƒå˜é‡**ï¼ˆä» GitHub Secrets è·å–æˆ–è‡ªåŠ¨ç”Ÿæˆï¼‰
4. è‡ªåŠ¨éƒ¨ç½² Worker åˆ° Cloudflare
5. å»ºè®®è®¾ç½®è‡ªå®šä¹‰åŸŸåä»£æ›¿ Cloudflare åŸæœ¬æä¾›çš„åŸŸå(å¦åˆ™å›½å†…æ— æ³•è®¿é—®)

**<span style="color:red">âš ï¸ è®°ä½ä½ çš„åç«¯åŸŸå </span>**

### å‰ç«¯è‡ªåŠ¨éƒ¨ç½²

#### Cloudflare Pages(æ¨è)

Fork ä»“åº“ï¼Œå¡«å¥½å¯†é’¥ï¼Œç„¶åè¿è¡Œå·¥ä½œæµ
æ¯å½“ `frontend` ç›®å½•ä¸­çš„æ–‡ä»¶æœ‰æ›´æ”¹å¹¶æ¨é€åˆ° `main` æˆ– `master` åˆ†æ”¯æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ã€‚éƒ¨ç½²åéœ€åœ¨ Cloudflare Pages æ§åˆ¶é¢æ¿è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. å¯¼èˆªåˆ° Pages â†’ æ‚¨çš„é¡¹ç›®ï¼ˆå¦‚ "cloudpaste-frontend"ï¼‰
3. ç‚¹å‡» "Settings" â†’ "Environment variables"
4. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

   - åç§°ï¼š`VITE_BACKEND_URL`
   - å€¼ï¼šåˆšåˆšéƒ¨ç½²çš„åç«¯ Worker URLï¼ˆå¦‚ `https://cloudpaste-backend.your-username.workers.dev`ï¼‰ï¼Œæœ«å°¾ä¸å¸¦"/", åŒæ—¶å»ºè®®ä½¿ç”¨è‡ªå®šä¹‰çš„ worker åç«¯åŸŸåã€‚

   - **<span style="color:red">ä¸€å®šè¦å®Œæ•´çš„å¡«å†™åç«¯åŸŸå,"https://xxxx.com" æ ¼å¼</span>**

5. é‡è¦æ­¥éª¤ï¼š éšåè¦å†æ¬¡è¿è¡Œä¸€éå‰ç«¯çš„å·¥ä½œæµï¼Œä»¥ä¾¿å®Œæˆåç«¯åŸŸååŠ è½½ï¼ï¼ï¼

   ![test-1](./images/test-1.png)

**<span style="color:red">åŠ¡å¿…ä¸¥æ ¼æŒ‰ç…§æ­¥éª¤æ“ä½œï¼Œå¦åˆ™ä¼šå‡ºç°åç«¯åŸŸååŠ è½½å¤±è´¥</span>**

#### Vercel

Vercel å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ–¹å¼éƒ¨ç½²ï¼š

1. Fork åå¯¼å…¥ GitHub é¡¹ç›®
2. é…ç½®éƒ¨ç½²å‚æ•°ï¼š

```
Framework Presetï¼ˆæ¡†æ¶é¢„è®¾ï¼‰: Vite
Build Commandï¼ˆæ„å»ºå‘½ä»¤ï¼‰: npm run build
Output Directoryï¼ˆè¾“å‡ºç›®å½•ï¼‰: dist
Install Commandï¼ˆå®‰è£…å‘½ä»¤ï¼‰: npm install
```

3. åœ¨ä¸‹é¢é…ç½®ç¯å¢ƒå˜é‡ï¼šè¾“å…¥ï¼šVITE_BACKEND_URL å’Œä½ çš„åç«¯åŸŸå
4. ç‚¹å‡» "Deploy" æŒ‰é’®è¿›è¡Œéƒ¨ç½²

â˜ï¸ **ä»¥ä¸ŠäºŒé€‰ä¸€å³å¯**

---

## æ‰‹åŠ¨éƒ¨ç½²:

### åç«¯æ‰‹åŠ¨éƒ¨ç½²

1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/ling-drag0n/CloudPaste.git
cd CloudPaste/backend
```

2. å®‰è£…ä¾èµ–

   ```bash
   npm install
   ```

3. ç™»å½• Cloudflare

   ```bash
   npx wrangler login
   ```

4. åˆ›å»º D1 æ•°æ®åº“

   ```bash
   npx wrangler d1 create cloudpaste-db
   ```

   è®°ä¸‹è¾“å‡ºçš„æ•°æ®åº“ IDã€‚

5. ä¿®æ”¹ wrangler.toml é…ç½®

   ```toml
   [[d1_databases]]
   binding = "DB"
   database_name = "cloudpaste-db"
   database_id = "æ‚¨çš„æ•°æ®åº“ID"
   ```

6. éƒ¨ç½² Worker

   ```bash
   npx wrangler deploy
   ```

   è®°ä¸‹è¾“å‡ºçš„ URLï¼Œè¿™æ˜¯æ‚¨çš„åç«¯ API åœ°å€ã€‚

7. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆè‡ªåŠ¨ï¼‰
   è®¿é—®æ‚¨çš„ Worker URL è§¦å‘åˆå§‹åŒ–ï¼š

   ```
   https://cloudpaste-backend.your-username.workers.dev
   ```

**<span style="color:red">âš ï¸ å®‰å…¨æç¤ºï¼šè¯·åœ¨ç³»ç»Ÿåˆå§‹åŒ–åç«‹å³ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç ï¼ˆç”¨æˆ·å: admin, å¯†ç : admin123ï¼‰ã€‚</span>**

### å‰ç«¯æ‰‹åŠ¨éƒ¨ç½²

#### Cloudflare Pages

1. å‡†å¤‡å‰ç«¯ä»£ç 

   ```bash
   cd CloudPaste/frontend
   npm install
   ```

2. é…ç½®ç¯å¢ƒå˜é‡
   åˆ›å»ºæˆ–ä¿®æ”¹ `.env.production` æ–‡ä»¶ï¼š

   ```
   VITE_BACKEND_URL=https://cloudpaste-backend.your-username.workers.dev
   VITE_APP_ENV=production
   VITE_ENABLE_DEVTOOLS=false
   ```

3. æ„å»ºå‰ç«¯é¡¹ç›®

   ```bash
   npm run build
   ```

4. éƒ¨ç½²åˆ° Cloudflare Pages

   **æ–¹æ³•ä¸€**ï¼šé€šè¿‡ Wrangler CLI

   ```bash
   npx wrangler pages deploy dist --project-name=cloudpaste-frontend
   ```

   **æ–¹æ³•äºŒ**ï¼šé€šè¿‡ Cloudflare Dashboard

   1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
   2. é€‰æ‹© "Pages"
   3. ç‚¹å‡» "Create a project" â†’ "Direct Upload"
   4. ä¸Šä¼  `dist` ç›®å½•å†…çš„æ–‡ä»¶
   5. è®¾ç½®é¡¹ç›®åç§°ï¼ˆå¦‚ "cloudpaste-frontend"ï¼‰
   6. ç‚¹å‡» "Save and Deploy"

#### Vercel

1. å‡†å¤‡å‰ç«¯ä»£ç 

   ```bash
   cd CloudPaste/frontend
   npm install
   ```

2. å®‰è£…å¹¶ç™»å½• Vercel CLI

   ```bash
   npm install -g vercel
   vercel login
   ```

3. é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¸ Cloudflare Pages ç›¸åŒ
4. æ„å»ºå¹¶éƒ¨ç½²

   ```bash
   vercel --prod
   ```

   æ ¹æ®æç¤ºé…ç½®é¡¹ç›®ã€‚

</details>

<details>
<summary><b>ğŸ‘‰ Dockeréƒ¨ç½²æ•™ç¨‹</b></summary>

### ğŸ“‘ ç›®å½•

- [Docker å‘½ä»¤è¡Œéƒ¨ç½²](#Dockerå‘½ä»¤è¡Œéƒ¨ç½²:)
   - [åç«¯ Docker éƒ¨ç½²](#åç«¯Dockeréƒ¨ç½²)
   - [å‰ç«¯ Docker éƒ¨ç½²](#å‰ç«¯Dockeréƒ¨ç½²)
- [Docker Compose ä¸€é”®éƒ¨ç½²](#Docker-Composeä¸€é”®éƒ¨ç½²:)

---

## Docker å‘½ä»¤è¡Œéƒ¨ç½²:

### åç«¯ Docker éƒ¨ç½²

CloudPaste åç«¯æ”¯æŒé€šè¿‡å®˜æ–¹ Docker é•œåƒå¿«é€Ÿéƒ¨ç½²ã€‚

1. åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•

   ```bash
   mkdir -p sql_data
   ```

2. è¿è¡Œåç«¯å®¹å™¨

   ```bash
   docker run -d --name cloudpaste-backend \
     -p 8787:8787 \
     -v $(pwd)/sql_data:/data \
     -e ENCRYPTION_SECRET=æ‚¨çš„åŠ å¯†å¯†é’¥ \
     -e NODE_ENV=production \
     -e RUNTIME_ENV=docker \
     dragon730/cloudpaste-backend:latest
   ```

   è®°ä¸‹éƒ¨ç½²çš„ URLï¼ˆå¦‚ `http://your-server-ip:8787`ï¼‰ï¼Œåç»­å‰ç«¯éƒ¨ç½²éœ€è¦ç”¨åˆ°ã€‚

**<span style="color:red">âš ï¸ å®‰å…¨æç¤ºï¼šè¯·åŠ¡å¿…è‡ªå®šä¹‰ ENCRYPTION_SECRET å¹¶ä¿å­˜å¥½ï¼Œæ­¤å¯†é’¥ç”¨äºåŠ å¯†æ•æ„Ÿæ•°æ®ã€‚</span>**

### å‰ç«¯ Docker éƒ¨ç½²

å‰ç«¯ä½¿ç”¨ Nginx æä¾›æœåŠ¡ï¼Œå¹¶åœ¨å¯åŠ¨æ—¶é…ç½®åç«¯ API åœ°å€ã€‚

```bash
docker run -d --name cloudpaste-frontend \
  -p 80:80 \
  -e BACKEND_URL=http://your-server-ip:8787 \
  dragon730/cloudpaste-frontend:latest
```

**<span style="color:red">âš ï¸ æ³¨æ„ï¼šBACKEND_URL å¿…é¡»åŒ…å«å®Œæ•´ URLï¼ˆåŒ…æ‹¬åè®® http:// æˆ– https://ï¼‰</span>**
**<span style="color:red">âš ï¸ å®‰å…¨æç¤ºï¼šè¯·åœ¨ç³»ç»Ÿåˆå§‹åŒ–åç«‹å³ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç ï¼ˆç”¨æˆ·å: admin, å¯†ç : admin123ï¼‰ã€‚</span>**

### Docker é•œåƒæ›´æ–°

å½“é¡¹ç›®å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œæ‚¨å¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ›´æ–° Docker éƒ¨ç½²ï¼š

1. æ‹‰å–æœ€æ–°é•œåƒ

   ```bash
   docker pull dragon730/cloudpaste-backend:latest
   docker pull dragon730/cloudpaste-frontend:latest
   ```

2. åœæ­¢å¹¶ç§»é™¤æ—§å®¹å™¨

   ```bash
   docker stop cloudpaste-backend cloudpaste-frontend
   docker rm cloudpaste-backend cloudpaste-frontend
   ```

3. ä½¿ç”¨ä¸Šè¿°ç›¸åŒçš„è¿è¡Œå‘½ä»¤å¯åŠ¨æ–°å®¹å™¨ï¼ˆä¿ç•™æ•°æ®ç›®å½•å’Œé…ç½®ï¼‰

## Docker-Compose ä¸€é”®éƒ¨ç½²:

ä½¿ç”¨ Docker Compose å¯ä»¥ä¸€é”®éƒ¨ç½²å‰åç«¯æœåŠ¡ï¼Œæ˜¯æœ€ç®€å•æ¨èçš„æ–¹å¼ã€‚

1. åˆ›å»º `docker-compose.yml` æ–‡ä»¶

```yaml
version: "3.8"

services:
  frontend:
    image: dragon730/cloudpaste-frontend:latest
    environment:
      - BACKEND_URL=https://xxx.com # å¡«å†™åç«¯æœåŠ¡åœ°å€
    ports:
      - "8080:80" #"127.0.0.1:8080:80"
    depends_on:
      - backend # ä¾èµ–backendæœåŠ¡
    networks:
      - cloudpaste-network
    restart: unless-stopped

  backend:
    image: dragon730/cloudpaste-backend:latest
    environment:
      - NODE_ENV=production
      - RUNTIME_ENV=docker
      - PORT=8787
      - ENCRYPTION_SECRET=è‡ªå®šä¹‰å¯†é’¥ # è¯·ä¿®æ”¹ä¸ºæ‚¨è‡ªå·±çš„å®‰å…¨å¯†é’¥
    volumes:
      - ./sql_data:/data # æ•°æ®æŒä¹…åŒ–
    ports:
      - "8787:8787" #"127.0.0.1:8787:8787"
    networks:
      - cloudpaste-network
    restart: unless-stopped

networks:
  cloudpaste-network:
    driver: bridge
```

2. å¯åŠ¨æœåŠ¡

```bash
docker-compose up -d
```

**<span style="color:red">âš ï¸ å®‰å…¨æç¤ºï¼šè¯·åœ¨ç³»ç»Ÿåˆå§‹åŒ–åç«‹å³ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç ï¼ˆç”¨æˆ·å: admin, å¯†ç : admin123ï¼‰ã€‚</span>**

3. è®¿é—®æœåŠ¡

å‰ç«¯: `http://your-server-ip:80`
åç«¯: `http://your-server-ip:8787`

### Docker Compose æ›´æ–°

å½“éœ€è¦æ›´æ–°åˆ°æ–°ç‰ˆæœ¬æ—¶ï¼š

1. æ‹‰å–æœ€æ–°é•œåƒ

   ```bash
   docker-compose pull
   ```

2. ä½¿ç”¨æ–°é•œåƒé‡æ–°åˆ›å»ºå®¹å™¨ï¼ˆä¿ç•™æ•°æ®å·ï¼‰

   ```bash
   docker-compose up -d --force-recreate
   ```

**<span style="color:orange">ğŸ’¡ æç¤ºï¼šå¦‚æœé‡åˆ°é…ç½®å˜æ›´ï¼Œå¯èƒ½éœ€è¦å¤‡ä»½æ•°æ®åä¿®æ”¹ docker-compose.yml æ–‡ä»¶</span>**

### Nginx åä»£ç¤ºä¾‹ï¼ˆä»…ä¾›å‚è€ƒï¼‰

```nginx
server {
    listen 443 ssl;
    server_name paste.yourdomain.com;  # æ›¿æ¢ä¸ºæ‚¨çš„åŸŸå

    # SSL è¯ä¹¦é…ç½®
    ssl_certificate     /path/to/cert.pem;  # æ›¿æ¢ä¸ºè¯ä¹¦è·¯å¾„
    ssl_certificate_key /path/to/key.pem;   # æ›¿æ¢ä¸ºå¯†é’¥è·¯å¾„

    # å‰ç«¯ä»£ç†é…ç½®
    location / {
        proxy_pass http://localhost:80;  # Dockerå‰ç«¯æœåŠ¡åœ°å€
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # åç«¯APIä»£ç†é…ç½®
    location /api {
        proxy_pass http://localhost:8787;  # Dockeråç«¯æœåŠ¡åœ°å€
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;

        # WebSocketæ”¯æŒ (å¦‚æœéœ€è¦)
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    # WebDav é…ç½®
    location /dav/ {
        proxy_pass http://localhost:8787/dav/;  # æŒ‡å‘æ‚¨çš„åç«¯æœåŠ¡

        # WebDAV å¿…è¦å¤´ä¿¡æ¯
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

        # WebDAV æ–¹æ³•æ”¯æŒ
        proxy_pass_request_headers on;

        # æ”¯æŒæ‰€æœ‰WebDAVæ–¹æ³•
        proxy_method $request_method;

        # å¿…è¦çš„å¤´ä¿¡æ¯å¤„ç†
        proxy_set_header Destination $http_destination;
        proxy_set_header Overwrite $http_overwrite;

        # å¤„ç†å¤§æ–‡ä»¶
        client_max_body_size 0;

        # è¶…æ—¶è®¾ç½®
        proxy_connect_timeout 3600s;
        proxy_send_timeout 3600s;
        proxy_read_timeout 3600s;
    }
}
```

**<span style="color:red">âš ï¸ å®‰å…¨æç¤ºï¼šå»ºè®®é…ç½® HTTPS å’Œåå‘ä»£ç†ï¼ˆå¦‚ Nginxï¼‰ä»¥æå‡å®‰å…¨æ€§ã€‚</span>**

</details>

<details>
<summary><b>ğŸ‘‰ S3ç›¸å…³è·¨åŸŸé…ç½®æ•™ç¨‹</b></summary>

## R2 API ç›¸å…³è·å–åŠè·¨åŸŸé…ç½®

1. ç™»å½• Cloudflare Dashboard
2. ç‚¹å‡» R2 å­˜å‚¨ï¼Œåˆ›å»ºä¸€ä¸ªå­˜å‚¨æ¡¶ã€‚
3. åˆ›å»º API ä»¤ç‰Œ
   ![R2api](./images/R2/R2-api.png)
   ![R2rw](./images/R2/R2-rw.png)

4. åˆ›å»ºåæŠŠå…¨éƒ¨æ•°æ®éƒ½ä¿å­˜å¥½ï¼Œåç»­è¦ç”¨
5. é…ç½®è·¨åŸŸè§„åˆ™ï¼Œç‚¹å‡»å¯¹åº”å­˜å‚¨æ¡¶ï¼Œç‚¹å‡»è®¾ç½®ï¼Œç¼–è¾‘ CORS ç­–ç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```json
[
  {
    "AllowedOrigins": ["http://localhost:3000", "https://æ ¹æ®è‡ªå·±çš„å‰ç«¯åŸŸåæ¥æ›¿ä»£"],
    "AllowedMethods": ["GET", "PUT", "POST", "DELETE", "HEAD"],
    "AllowedHeaders": ["*"],
    "ExposeHeaders": ["ETag"],
    "MaxAgeSeconds": 3600
  }
]
```

## B2 API ç›¸å…³è·å–åŠè·¨åŸŸé…ç½®

1. è‹¥æ²¡æœ‰ B2 è´¦å·ï¼Œå¯ä»¥å…ˆ[æ³¨å†Œ](https://www.backblaze.com/sign-up/cloud-storage?referrer=getstarted)ä¸€ä¸ªï¼Œç„¶ååˆ›å»ºä¸€ä¸ªå­˜å‚¨æ¡¶ã€‚
   ![B2è´¦å·æ³¨å†Œ](./images/B2/B2-1.png)
2. ç‚¹å‡»ä¾§è¾¹æ çš„ Application Keyï¼Œç‚¹å‡» Create Keyï¼Œç„¶åå¦‚å›¾æ‰€ç¤ºã€‚
   ![B2key](./images/B2/B2-2.png)
3. é…ç½® B2 çš„è·¨åŸŸï¼ŒB2 è·¨åŸŸé…ç½®æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€æ³¨æ„
   ![B2cors](./images/B2/B2-3.png)
4. å¯ä»¥å…ˆå°è¯•ä¸€ä¸‹ 1 æˆ– 2ï¼Œå»åˆ°ä¸Šä¼ é¡µé¢çœ‹çœ‹æ˜¯å¦èƒ½ä¸Šä¼ ï¼ŒF12 æ‰“å¼€æ§åˆ¶å°è‹¥æ˜¾ç¤ºè·¨åŸŸé”™è¯¯ï¼Œåˆ™ä½¿ç”¨ 3ã€‚è¦ä¸€åŠ³æ°¸é€¸å°±ç›´æ¥ä½¿ç”¨ 3ã€‚

   ![B21](./images/B2/B2-4.png)

å…³äº 3 çš„é…ç½®ç”±äºé¢æ¿æ— æ³•é…ç½®ï¼Œåªèƒ½æ‰‹åŠ¨é…ç½®ï¼Œéœ€[ä¸‹è½½ B2 CLI](https://www.backblaze.com/docs/cloud-storage-command-line-tools)å¯¹åº”å·¥å…·ã€‚å…·ä½“å¯ä»¥å‚è€ƒï¼š"https://docs.cloudreve.org/use/policy/s3#backblaze-b2 " ã€‚

ä¸‹è½½åï¼Œåœ¨å¯¹åº”ä¸‹è½½ç›®å½• cmdï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```txt
b2.exe account authorize   //è¿›è¡Œè´¦å·ç™»å½•ï¼Œæ ¹æ®æç¤ºå¡«å…¥ä¹‹å‰çš„ keyID å’Œ applicationKey
b2.exe bucket get <bucketName> //ä½ å¯ä»¥æ‰§è¡Œè·å–bucketä¿¡æ¯ï¼Œ<bucketName>æ¢æˆæ¡¶åå­—
```

windows é…ç½®ï¼Œé‡‡ç”¨â€œ.\b2-windows.exe xxxâ€ï¼Œ
æ‰€ä»¥åœ¨å¯¹åº” cli çš„ exe æ–‡ä»¶å¤¹ä¸­ cmd è¾“å…¥ï¼Œpython çš„ cli ä¹ŸåŒç†ï¼š

```cmd
b2.exe bucket update <bucketName> allPrivate --cors-rules "[{\"corsRuleName\":\"CloudPaste\",\"allowedOrigins\":[\"*\"],\"allowedHeaders\":[\"*\"],\"allowedOperations\":[\"b2_upload_file\",\"b2_download_file_by_name\",\"b2_download_file_by_id\",\"s3_head\",\"s3_get\",\"s3_put\",\"s3_post\",\"s3_delete\"],\"exposeHeaders\":[\"Etag\",\"content-length\",\"content-type\",\"x-bz-content-sha1\"],\"maxAgeSeconds\":3600}]"
```

å…¶ä¸­<bucketName>æ¢æˆä½ çš„å­˜å‚¨æ¡¶åå­—ï¼Œå…³äºå…è®¸è·¨åŸŸçš„åŸŸå allowedOrigins å¯ä»¥æ ¹æ®ä¸ªäººé…ç½®ï¼Œè¿™é‡Œæ˜¯å…è®¸æ‰€æœ‰ã€‚

5. å·²å®Œæˆè·¨åŸŸé…ç½®

## æ›´å¤š S3 ç›¸å…³é…ç½®å¾…ç»­......

</details>

<details>
<summary><b>ğŸ‘‰ WebDAVé…ç½®è¯¦ç»†æŒ‡å—</b></summary>

## WebDAV é…ç½®ä¸ä½¿ç”¨è¯¦è§£

CloudPaste æä¾›ç®€æ˜“çš„ WebDAV åè®®æ”¯æŒï¼Œå…è®¸æ‚¨å°†å­˜å‚¨ç©ºé—´æŒ‚è½½ä¸ºç½‘ç»œé©±åŠ¨å™¨ï¼Œä¾¿äºç›´æ¥é€šè¿‡æ–‡ä»¶ç®¡ç†å™¨è®¿é—®å’Œç®¡ç†æ–‡ä»¶ã€‚

### WebDAV æœåŠ¡åŸºæœ¬ä¿¡æ¯

- **WebDAV åŸºç¡€ URL**: `https://ä½ çš„åç«¯åŸŸå/dav`
- **æ”¯æŒçš„è®¤è¯æ–¹å¼**:
   - Basic è®¤è¯ï¼ˆç”¨æˆ·å+å¯†ç ï¼‰
- **æ”¯æŒçš„æƒé™ç±»å‹**:
   - ç®¡ç†å‘˜è´¦æˆ· - æ‹¥æœ‰å®Œæ•´æ“ä½œæƒé™
   - API å¯†é’¥ - éœ€å¯ç”¨æŒ‚è½½æƒé™ï¼ˆmount_permissionï¼‰

### æƒé™é…ç½®

#### 1. ç®¡ç†å‘˜è´¦æˆ·è®¿é—®

ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·å’Œå¯†ç ç›´æ¥è®¿é—® WebDAV æœåŠ¡ï¼š

- **ç”¨æˆ·å**: ç®¡ç†å‘˜ç”¨æˆ·å
- **å¯†ç **: ç®¡ç†å‘˜å¯†ç 

#### 2. API å¯†é’¥è®¿é—®ï¼ˆæ¨èï¼‰

ä¸ºæ›´å®‰å…¨çš„è®¿é—®æ–¹å¼ï¼Œå»ºè®®åˆ›å»ºä¸“ç”¨ API å¯†é’¥ï¼š

1. ç™»å½•ç®¡ç†ç•Œé¢
2. å¯¼èˆªè‡³"API å¯†é’¥ç®¡ç†"
3. åˆ›å»ºæ–° API å¯†é’¥ï¼Œ**ç¡®ä¿å¯ç”¨"æŒ‚è½½æƒé™"**
4. ä½¿ç”¨æ–¹å¼ï¼š
   - **ç”¨æˆ·å**: API å¯†é’¥å€¼
   - **å¯†ç **: ä¸ç”¨æˆ·åç›¸åŒçš„ API å¯†é’¥å€¼

### NGINX åå‘ä»£ç†é…ç½®

å¦‚æœä½¿ç”¨ NGINX ä½œä¸ºåå‘ä»£ç†ï¼Œéœ€è¦æ·»åŠ ç‰¹å®šçš„ WebDAV é…ç½®ä»¥ç¡®ä¿æ‰€æœ‰ WebDAV æ–¹æ³•æ­£å¸¸å·¥ä½œï¼š

```nginx
# WebDAV é…ç½®
location /dav {
    proxy_pass http://localhost:8787;  # æŒ‡å‘æ‚¨çš„åç«¯æœåŠ¡

    # WebDAV å¿…è¦å¤´ä¿¡æ¯
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

    # WebDAV æ–¹æ³•æ”¯æŒ
    proxy_pass_request_headers on;

    # æ”¯æŒæ‰€æœ‰WebDAVæ–¹æ³•
    proxy_method $request_method;

    # å¿…è¦çš„å¤´ä¿¡æ¯å¤„ç†
    proxy_set_header Destination $http_destination;
    proxy_set_header Overwrite $http_overwrite;

    # å¤„ç†å¤§æ–‡ä»¶
    client_max_body_size 0;

    # è¶…æ—¶è®¾ç½®
    proxy_connect_timeout 3600s;
    proxy_send_timeout 3600s;
    proxy_read_timeout 3600s;
}
```

### å¸¸è§é—®é¢˜è§£å†³

1. **è¿æ¥é—®é¢˜**:

   - ç¡®è®¤ WebDAV URL æ ¼å¼æ­£ç¡®
   - éªŒè¯è®¤è¯å‡­æ®æ˜¯å¦æœ‰æ•ˆ
   - æ£€æŸ¥ API å¯†é’¥æ˜¯å¦å…·æœ‰æŒ‚è½½æƒé™

2. **æƒé™é”™è¯¯**:

   - ç¡®è®¤è´¦æˆ·å…·æœ‰æ‰€éœ€çš„æƒé™
   - ç®¡ç†å‘˜è´¦æˆ·åº”æœ‰å®Œæ•´æƒé™
   - API å¯†é’¥éœ€ç‰¹åˆ«å¯ç”¨æŒ‚è½½æƒé™

3. **âš ï¸âš ï¸ Webdav ä¸Šä¼ é—®é¢˜**:

   - é¢„ç­¾åä¸Šä¼ æ¨¡å¼ä¸‹ï¼Œéœ€è¦æ³¨æ„é…ç½®å¯¹åº”çš„ S3 å­˜å‚¨çš„è·¨åŸŸé…ç½®
   - WebDav çš„è‡ªåŠ¨æ¨èæ¨¡å¼ä¸‹ï¼Œå°äº 10MB æ–‡ä»¶é‡‡ç”¨ç›´ä¼ æ¨¡å¼ï¼Œ10-50MB æ–‡ä»¶é‡‡ç”¨åˆ†ç‰‡ä¸Šä¼ æ¨¡å¼ï¼Œå¤§äº 50MB æ–‡ä»¶é‡‡ç”¨é¢„ç­¾åä¸Šä¼ æ¨¡å¼ã€‚
   - å…³äº Cloudflare çš„ Worker ä¸Šä¼ é™åˆ¶ï¼Œå»ºè®®ä½¿ç”¨é¢„ç­¾åæˆ–ç›´ä¼ æ¨¡å¼ï¼Œä¸è¦ä½¿ç”¨åˆ†ç‰‡
   - å¯¹äº Docker éƒ¨ç½²ï¼Œåªéœ€æ³¨æ„ nginx ä»£ç†é…ç½®ï¼Œä¸Šä¼ æ¨¡å¼ä»»æ„ã€‚
   - Windowsï¼ŒRaidrive ç­‰å®¢æˆ·ç«¯æŒ‚è½½æš‚ä¸æ”¯æŒæ‹–åŠ¨ä¸Šä¼ 

</details>

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯

- **æ¡†æ¶**: Vue.js 3 + Vite
- **æ ·å¼**: TailwindCSS
- **ç¼–è¾‘å™¨**: Vditor
- **å›½é™…åŒ–**: Vue-i18n
- **å›¾è¡¨**: Chart.js + Vue-chartjs

### åç«¯

- **è¿è¡Œæ—¶**: Cloudflare Workers
- **æ¡†æ¶**: Hono
- **æ•°æ®åº“**: Cloudflare D1 (SQLite)
- **å­˜å‚¨**: å¤š S3 å…¼å®¹æœåŠ¡ (æ”¯æŒ R2, B2, AWS S3)
- **è®¤è¯**: JWT ä»¤ç‰Œ + API å¯†é’¥

## ğŸ’» å¼€å‘

### API æ–‡æ¡£

[API æ–‡æ¡£](Api-doc.md)

[æœåŠ¡å™¨ æ–‡ä»¶ç›´ä¼  API æ–‡æ¡£](Api-s3_direct.md) - æœåŠ¡å™¨ æ–‡ä»¶ç›´ä¼ æ¥å£è¯¦ç»†è¯´æ˜

### æœ¬åœ°å¼€å‘è®¾ç½®

1. **å…‹éš†é¡¹ç›®ä»“åº“**

   ```bash
   git clone https://github.com/ling-drag0n/cloudpaste.git
   cd cloudpaste
   ```

2. **åç«¯è®¾ç½®**

   ```bash
   cd backend
   npm install
   # åˆå§‹åŒ– D1 æ•°æ®åº“
   wrangler d1 create cloudpaste-db
   wrangler d1 execute cloudpaste-db --file=./schema.sql
   ```

3. **å‰ç«¯è®¾ç½®**

   ```bash
   cd frontend
   npm install
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**

   - åœ¨ `backend` ç›®å½•ä¸‹ï¼Œåˆ›å»º `wrangler.toml` æ–‡ä»¶è®¾ç½®å¼€å‘ç¯å¢ƒå˜é‡
   - åœ¨ `frontend` ç›®å½•ä¸‹ï¼Œé…ç½® `.env.development` æ–‡ä»¶è®¾ç½®å‰ç«¯ç¯å¢ƒå˜é‡

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

   ```bash
   # åç«¯
   cd backend
   npm run dev

   # å‰ç«¯ (å¦ä¸€ä¸ªç»ˆç«¯)
   cd frontend
   npm run dev
   ```

### é¡¹ç›®ç»“æ„

```
CloudPaste/
â”œâ”€â”€ frontend/                # å‰ç«¯ Vue.js åº”ç”¨
â”‚   â”œâ”€â”€ src/                 # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/      # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ api/             # API å®¢æˆ·ç«¯å’ŒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ i18n/            # å›½é™…åŒ–èµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ assets/          # é™æ€èµ„æº
â”‚   â””â”€â”€ ...
â””â”€â”€ backend/                 # Cloudflare Workers åç«¯
    â”œâ”€â”€ worker.js            # ä¸»è¦ Worker æ–‡ä»¶
    â”œâ”€â”€ schema.sql           # D1 æ•°æ®åº“æ¨¡å¼
    â””â”€â”€ ...
```

### è‡ªå®šä¹‰ Docker æ„å»º

å¦‚æœæ‚¨å¸Œæœ›è‡ªå®šä¹‰ Docker é•œåƒæˆ–è¿›è¡Œå¼€å‘è°ƒè¯•ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨æ„å»ºï¼š

1. **æ„å»ºåç«¯é•œåƒ**

   ```bash
   # åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
   docker build -t cloudpaste-backend:custom -f docker/backend/Dockerfile .

   # è¿è¡Œè‡ªå®šä¹‰æ„å»ºçš„é•œåƒ
   docker run -d --name cloudpaste-backend \
     -p 8787:8787 \
     -v $(pwd)/sql_data:/data \
     -e ENCRYPTION_SECRET=å¼€å‘æµ‹è¯•å¯†é’¥ \
     cloudpaste-backend:custom
   ```

2. **æ„å»ºå‰ç«¯é•œåƒ**

   ```bash
   # åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
   docker build -t cloudpaste-frontend:custom -f docker/frontend/Dockerfile .

   # è¿è¡Œè‡ªå®šä¹‰æ„å»ºçš„é•œåƒ
   docker run -d --name cloudpaste-frontend \
     -p 80:80 \
     -e BACKEND_URL=http://localhost:8787 \
     cloudpaste-frontend:custom
   ```

3. **å¼€å‘ç¯å¢ƒ Docker Compose**

   åˆ›å»º `docker-compose.dev.yml` æ–‡ä»¶ï¼š

   ```yaml
   version: "3.8"

   services:
     frontend:
       build:
         context: .
         dockerfile: docker/frontend/Dockerfile
       environment:
         - BACKEND_URL=http://backend:8787
       ports:
         - "80:80"
       depends_on:
         - backend

     backend:
       build:
         context: .
         dockerfile: docker/backend/Dockerfile
       environment:
         - NODE_ENV=development
         - RUNTIME_ENV=docker
         - PORT=8787
         - ENCRYPTION_SECRET=dev_secret_key
       volumes:
         - ./sql_data:/data
       ports:
         - "8787:8787"
   ```

   å¯åŠ¨å¼€å‘ç¯å¢ƒï¼š

   ```bash
   docker-compose -f docker-compose.yml up --build
   ```

## ğŸ“„ è®¸å¯è¯

Apache License 2.0

æœ¬é¡¹ç›®ä½¿ç”¨ Apache License 2.0 è®¸å¯è¯ - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=ling-drag0n/CloudPaste&type=Date)](https://star-history.com/#ling-drag0n/CloudPaste&Date)

**å¦‚æœè§‰å¾—é¡¹ç›®ä¸é”™å¸Œæœ›æ‚¨èƒ½ç»™ä¸ªå…è´¹çš„ starâœ¨âœ¨ï¼Œéå¸¸æ„Ÿè°¢ï¼**
