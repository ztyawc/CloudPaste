# CloudPaste - åœ¨çº¿å‰ªè´´æ¿ ğŸ“‹

<div align="center">
    <p>
    <a href="README.md">ä¸­æ–‡</a> | <a href="README_EN.md">English</a>
    </p>
    <img width="100" height="100" src="https://img.icons8.com/dusk/100/paste.png" alt="paste"/>
    <h3>åŸºäº Cloudflare çš„åœ¨çº¿å‰ªè´´æ¿å’Œæ–‡ä»¶åˆ†äº«æœåŠ¡ï¼Œæ”¯æŒ Markdown ç¼–è¾‘å’Œæ–‡ä»¶ä¸Šä¼ </h3>
</div>

<p align="center">
  <a href="#-å±•ç¤º">ğŸ“¸ å±•ç¤º</a> â€¢
  <a href="#-ç‰¹ç‚¹">âœ¨ ç‰¹ç‚¹</a> â€¢
  <a href="#-éƒ¨ç½²æ•™ç¨‹">ğŸš€ éƒ¨ç½²æ•™ç¨‹</a> â€¢
  <a href="#-æŠ€æœ¯æ ˆ">ğŸ”§ æŠ€æœ¯æ ˆ</a> â€¢
  <a href="#-å¼€å‘">ğŸ’» å¼€å‘</a> â€¢
  <a href="#-è®¸å¯è¯">ğŸ“„ è®¸å¯è¯</a>
</p>

## ğŸ“¸ å±•ç¤º

<table align="center">
  <tr>
    <td><img src="./images/image-1.png" width="400"/></td>
    <td><img src="./images/image-2.png" width="400"/></td>
  </tr>
  <tr>
    <td><img src="./images/image-3.png" width="400"/></td>
    <td><img src="./images/image-4.png" width="400"/></td>
  </tr>
  <tr>
    <td><img src="./images/image-5.png" width="400"/></td>
    <td><img src="./images/image-en1.png" width="400"/></td>
  </tr>
</table>

## âœ¨ ç‰¹ç‚¹

### ğŸ“ Markdown ç¼–è¾‘ä¸åˆ†äº«

- **å¼ºå¤§çš„ç¼–è¾‘å™¨**ï¼šé›†æˆ [Vditor](https://github.com/Vanessa219/vditor)ï¼Œæ”¯æŒ GitHub é£æ ¼çš„ Markdownã€æ•°å­¦å…¬å¼ã€æµç¨‹å›¾ã€æ€ç»´å¯¼å›¾ç­‰
- **å®‰å…¨åˆ†äº«**ï¼šå†…å®¹å¯è®¾ç½®è®¿é—®å¯†ç ä¿æŠ¤
- **çµæ´»æ—¶æ•ˆ**ï¼šæ”¯æŒè®¾ç½®å†…å®¹è¿‡æœŸæ—¶é—´
- **è®¿é—®æ§åˆ¶**ï¼šå¯é™åˆ¶æœ€å¤§æŸ¥çœ‹æ¬¡æ•°
- **ä¸ªæ€§åŒ–**ï¼šè‡ªå®šä¹‰åˆ†äº«é“¾æ¥åŠå¤‡æ³¨
- **å¤šæ ¼å¼å¯¼å‡º**ï¼šæ”¯æŒ PDFã€Markdownã€HTML å¯¼å‡º
- **ä¾¿æ·åˆ†äº«**ï¼šä¸€é”®å¤åˆ¶åˆ†äº«é“¾æ¥å’Œç”ŸæˆäºŒç»´ç 
- **è‡ªåŠ¨ä¿å­˜**ï¼šæ”¯æŒè‡ªåŠ¨ä¿å­˜è‰ç¨¿åŠŸèƒ½

### ğŸ“¤ æ–‡ä»¶ä¸Šä¼ ä¸ç®¡ç†

- **å¤šå­˜å‚¨æ”¯æŒ**ï¼šå…¼å®¹å¤šç§ S3 å­˜å‚¨æœåŠ¡ (Cloudflare R2ã€Backblaze B2ã€AWS S3 ç­‰)
- **å­˜å‚¨é…ç½®**ï¼šå¯è§†åŒ–ç•Œé¢é…ç½®å¤šä¸ªå­˜å‚¨ç©ºé—´ï¼Œçµæ´»åˆ‡æ¢é»˜è®¤å­˜å‚¨æº
- **é«˜æ•ˆä¸Šä¼ **ï¼šé€šè¿‡é¢„ç­¾å URL ç›´æ¥ä¸Šä¼ è‡³ S3 å­˜å‚¨
- **å®æ—¶åé¦ˆ**ï¼šä¸Šä¼ è¿›åº¦å®æ—¶æ˜¾ç¤º
- **è‡ªå®šä¹‰é™åˆ¶**ï¼šå•æ¬¡ä¸Šä¼ é™åˆ¶å’Œæœ€å¤§å®¹é‡é™åˆ¶
- **å…ƒæ•°æ®ç®¡ç†**ï¼šæ–‡ä»¶å¤‡æ³¨ã€å¯†ç ã€è¿‡æœŸæ—¶é—´ã€è®¿é—®é™åˆ¶
- **æ•°æ®åˆ†æ**ï¼šæ–‡ä»¶è®¿é—®ç»Ÿè®¡ä¸è¶‹åŠ¿åˆ†æ

### ğŸ›  ä¾¿æ·çš„æ–‡ä»¶/æ–‡æœ¬æ“ä½œ

- **ç»Ÿä¸€ç®¡ç†**ï¼šæ”¯æŒæ–‡ä»¶/æ–‡æœ¬åˆ›å»ºã€åˆ é™¤å’Œå±æ€§ä¿®æ”¹
- **åœ¨çº¿é¢„è§ˆ**ï¼šå¸¸è§æ–‡æ¡£ã€å›¾ç‰‡å’Œåª’ä½“æ–‡ä»¶çš„åœ¨çº¿é¢„è§ˆä¸ç›´é“¾ç”Ÿæˆ
- **åˆ†äº«å·¥å…·**ï¼šç”ŸæˆçŸ­é“¾æ¥å’ŒäºŒç»´ç ï¼Œä¾¿äºè·¨å¹³å°åˆ†äº«
- **æ‰¹é‡ç®¡ç†**ï¼šæ–‡ä»¶/æ–‡æœ¬æ‰¹é‡æ“ä½œä¸æ˜¾ç¤º

### ğŸ” è½»é‡æƒé™ç®¡ç†

#### ç®¡ç†å‘˜æƒé™æ§åˆ¶

- **ç³»ç»Ÿç®¡ç†**ï¼šå…¨å±€ç³»ç»Ÿè®¾ç½®é…ç½®
- **å†…å®¹å®¡æ ¸**ï¼šæ‰€æœ‰ç”¨æˆ·å†…å®¹çš„ç®¡ç†
- **å­˜å‚¨ç®¡ç†**ï¼šS3 å­˜å‚¨æœåŠ¡çš„æ·»åŠ ã€ç¼–è¾‘ä¸åˆ é™¤
- **æƒé™åˆ†é…**ï¼šAPI å¯†é’¥çš„åˆ›å»ºä¸æƒé™ç®¡ç†
- **æ•°æ®åˆ†æ**ï¼šå®Œæ•´çš„ç»Ÿè®¡æ•°æ®è®¿é—®

#### API å¯†é’¥æƒé™æ§åˆ¶

- **æ–‡æœ¬æƒé™**ï¼šåˆ›å»º/ç¼–è¾‘/åˆ é™¤æ–‡æœ¬å†…å®¹
- **æ–‡ä»¶æƒé™**ï¼šä¸Šä¼ /ç®¡ç†/åˆ é™¤æ–‡ä»¶
- **å­˜å‚¨æƒé™**ï¼šå¯é€‰æ‹©ç‰¹å®šçš„å­˜å‚¨é…ç½®
- **è¯»å†™åˆ†ç¦»**ï¼šå¯è®¾ç½®åªè¯»æˆ–è¯»å†™æƒé™
- **æ—¶æ•ˆæ§åˆ¶**ï¼šè‡ªå®šä¹‰æœ‰æ•ˆæœŸï¼ˆä»å°æ—¶åˆ°æœˆï¼‰
- **å®‰å…¨æœºåˆ¶**ï¼šè‡ªåŠ¨å¤±æ•ˆä¸æ‰‹åŠ¨æ’¤é”€åŠŸèƒ½

### ğŸ’« ç³»ç»ŸåŠŸèƒ½

- **é€‚é…æ€§å¼º**ï¼šå“åº”å¼è®¾è®¡ï¼Œé€‚é…ç§»åŠ¨è®¾å¤‡å’Œæ¡Œé¢
- **å¤šè¯­è¨€**ï¼šä¸­/è‹±æ–‡åŒè¯­ç•Œé¢æ”¯æŒ
- **è§†è§‰æ¨¡å¼**ï¼šæ˜äº®/æš—é»‘ä¸»é¢˜åˆ‡æ¢
- **å®‰å…¨è®¤è¯**ï¼šåŸºäº JWT çš„ç®¡ç†å‘˜è®¤è¯ç³»ç»Ÿ
- **ç¦»çº¿ä½“éªŒ**ï¼šPWA æ”¯æŒï¼Œå¯ç¦»çº¿ä½¿ç”¨å’Œå®‰è£…åˆ°æ¡Œé¢

## ğŸš€ éƒ¨ç½²æ•™ç¨‹

### å‰æœŸå‡†å¤‡

åœ¨å¼€å§‹éƒ¨ç½²å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²å‡†å¤‡ä»¥ä¸‹å†…å®¹ï¼š

- [ ] [Cloudflare](https://dash.cloudflare.com) è´¦å·ï¼ˆå¿…éœ€ï¼‰
- [ ] å¦‚ä½¿ç”¨ R2ï¼šå¼€é€š **Cloudflare R2** æœåŠ¡å¹¶åˆ›å»ºå­˜å‚¨æ¡¶ï¼ˆéœ€ç»‘å®šæ”¯ä»˜æ–¹å¼ï¼‰
- [ ] å¦‚ä½¿ç”¨ Vercelï¼šæ³¨å†Œ [Vercel](https://vercel.com) è´¦å·
- [ ] å…¶ä»– S3 å­˜å‚¨æœåŠ¡çš„é…ç½®ä¿¡æ¯ï¼š
  - `S3_ACCESS_KEY_ID`
  - `S3_SECRET_ACCESS_KEY`
  - `S3_BUCKET_NAME`
  - `S3_ENDPOINT`

<details>
<summary><b>ğŸ‘‰ æŸ¥çœ‹å®Œæ•´éƒ¨ç½²æ•™ç¨‹</b></summary>

### ğŸ“‘ ç›®å½•

- [Action è‡ªåŠ¨éƒ¨ç½²](#Actionè‡ªåŠ¨éƒ¨ç½²:)
  - [åç«¯è‡ªåŠ¨éƒ¨ç½²](#åç«¯è‡ªåŠ¨éƒ¨ç½²)
  - [å‰ç«¯è‡ªåŠ¨éƒ¨ç½²](#å‰ç«¯è‡ªåŠ¨éƒ¨ç½²)
- [æ‰‹åŠ¨éƒ¨ç½²](#æ‰‹åŠ¨éƒ¨ç½²:)
  - [åç«¯æ‰‹åŠ¨éƒ¨ç½²](#åç«¯æ‰‹åŠ¨éƒ¨ç½²)
  - [å‰ç«¯æ‰‹åŠ¨éƒ¨ç½²](#å‰ç«¯æ‰‹åŠ¨éƒ¨ç½²)

---

## Action è‡ªåŠ¨éƒ¨ç½²:

ä½¿ç”¨ GitHub Actions å¯ä»¥å®ç°ä»£ç æ¨é€åè‡ªåŠ¨éƒ¨ç½²åº”ç”¨ã€‚

### é…ç½® GitHub ä»“åº“

1. Fork æˆ–å…‹éš†ä»“åº“ [https://github.com/ling-drag0n/CloudPaste](https://github.com/ling-drag0n/CloudPaste)
2. è¿›å…¥æ‚¨çš„ GitHub ä»“åº“è®¾ç½®
3. è½¬åˆ° Settings â†’ Secrets and variables â†’ Actions â†’ New Repository secrets
4. æ·»åŠ ä»¥ä¸‹ Secretsï¼š

| Secret åç§°             | å¿…éœ€ | ç”¨é€”                                                  |
| ----------------------- | ---- | ----------------------------------------------------- |
| `CLOUDFLARE_API_TOKEN`  | âœ…   | Cloudflare API ä»¤ç‰Œï¼ˆéœ€è¦ Workersã€D1 å’Œ Pages æƒé™ï¼‰ |
| `CLOUDFLARE_ACCOUNT_ID` | âœ…   | Cloudflare è´¦æˆ· ID                                    |
| `ENCRYPTION_SECRET`     | âŒ   | ç”¨äºåŠ å¯†æ•æ„Ÿæ•°æ®çš„å¯†é’¥ï¼ˆå¦‚ä¸æä¾›ï¼Œå°†è‡ªåŠ¨ç”Ÿæˆï¼‰        |

#### è·å– Cloudflare API ä»¤ç‰Œ

1. è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com/profile/api-tokens)
2. åˆ›å»ºæ–°çš„ API ä»¤ç‰Œ
3. é€‰æ‹©"ç¼–è¾‘ Cloudflare Workers"æ¨¡æ¿ï¼Œå¹¶æ·»åŠ  D1 æ•°æ®åº“ç¼–è¾‘æƒé™

### åç«¯è‡ªåŠ¨éƒ¨ç½²

Fork ä»“åº“ï¼Œå¡«å¥½å¯†é’¥ï¼Œç„¶åè¿è¡Œå·¥ä½œæµ
æ¯å½“ `backend` ç›®å½•ä¸­çš„æ–‡ä»¶æœ‰æ›´æ”¹å¹¶æ¨é€åˆ° `main` æˆ– `master` åˆ†æ”¯æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ã€‚å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š

1. æ£€å‡ºä»£ç ä»“åº“
2. è®¾ç½® Node.js ç¯å¢ƒ
3. å®‰è£…ä¾èµ–
4. ç¦ç”¨ Wrangler é¥æµ‹æ•°æ®æ”¶é›†
5. **è‡ªåŠ¨åˆ›å»º D1 æ•°æ®åº“**ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
6. **ç”¨ schema.sql åˆå§‹åŒ–æ•°æ®åº“**ï¼ˆåˆ›å»ºè¡¨å’Œåˆå§‹æ•°æ®ï¼‰
7. **è®¾ç½® ENCRYPTION_SECRET ç¯å¢ƒå˜é‡**ï¼ˆä» GitHub Secrets è·å–æˆ–è‡ªåŠ¨ç”Ÿæˆï¼‰
8. è‡ªåŠ¨éƒ¨ç½² Worker åˆ° Cloudflare

### å‰ç«¯è‡ªåŠ¨éƒ¨ç½²

#### Cloudflare Pages(æ¨è)

Fork ä»“åº“ï¼Œå¡«å¥½å¯†é’¥ï¼Œç„¶åè¿è¡Œå·¥ä½œæµ
æ¯å½“ `frontend` ç›®å½•ä¸­çš„æ–‡ä»¶æœ‰æ›´æ”¹å¹¶æ¨é€åˆ° `main` æˆ– `master` åˆ†æ”¯æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ã€‚éƒ¨ç½²åéœ€åœ¨ Cloudflare Pages æ§åˆ¶é¢æ¿è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. å¯¼èˆªåˆ° Pages â†’ æ‚¨çš„é¡¹ç›®ï¼ˆå¦‚ "cloudpaste-frontend"ï¼‰
3. ç‚¹å‡» "Settings" â†’ "Environment variables"
4. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

   - åç§°ï¼š`VITE_BACKEND_URL`
   - å€¼ï¼šæ‚¨çš„åç«¯ Worker URLï¼ˆå¦‚ `https://cloudpaste-backend.your-username.workers.dev`ï¼‰

5. éšåå†æ¬¡è¿è¡Œä¸€éå·¥ä½œæµï¼Œå®Œæˆåç«¯åŸŸååŠ è½½
#### Vercel

Vercel å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ–¹å¼éƒ¨ç½²ï¼š

1. Fork åå¯¼å…¥ GitHub é¡¹ç›®
2. é…ç½®éƒ¨ç½²å‚æ•°ï¼š

```
Framework Presetï¼ˆæ¡†æ¶é¢„è®¾ï¼‰: Vite
Build Commandï¼ˆæ„å»ºå‘½ä»¤ï¼‰: npm run build
Output Directoryï¼ˆè¾“å‡ºç›®å½•ï¼‰: dist
Install Commandï¼ˆå®‰è£…å‘½ä»¤ï¼‰: npm install
```
3. åœ¨ä¸‹é¢é…ç½®ç¯å¢ƒå˜é‡ï¼šè¾“å…¥ï¼šVITE_BACKEND_URL å’Œä½ çš„åç«¯åŸŸå
4. ç‚¹å‡» "Deploy" æŒ‰é’®è¿›è¡Œéƒ¨ç½²

â˜ï¸ **ä»¥ä¸ŠäºŒé€‰ä¸€å³å¯**

---

## æ‰‹åŠ¨éƒ¨ç½²:

### åç«¯æ‰‹åŠ¨éƒ¨ç½²

1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/ling-drag0n/CloudPaste.git
cd CloudPaste/backend
```

2. å®‰è£…ä¾èµ–

   ```bash
   npm install
   ```

3. ç™»å½• Cloudflare

   ```bash
   npx wrangler login
   ```

4. åˆ›å»º D1 æ•°æ®åº“

   ```bash
   npx wrangler d1 create cloudpaste-db
   ```

   è®°ä¸‹è¾“å‡ºçš„æ•°æ®åº“ IDã€‚

5. ä¿®æ”¹ wrangler.toml é…ç½®

   ```toml
   [[d1_databases]]
   binding = "DB"
   database_name = "cloudpaste-db"
   database_id = "æ‚¨çš„æ•°æ®åº“ID"
   ```

6. éƒ¨ç½² Worker

   ```bash
   npx wrangler deploy
   ```

   è®°ä¸‹è¾“å‡ºçš„ URLï¼Œè¿™æ˜¯æ‚¨çš„åç«¯ API åœ°å€ã€‚

7. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆè‡ªåŠ¨ï¼‰
   è®¿é—®æ‚¨çš„ Worker URL è§¦å‘åˆå§‹åŒ–ï¼š

   ```
   https://cloudpaste-backend.your-username.workers.dev
   ```

   âš ï¸ **å®‰å…¨æç¤º**ï¼šè¯·åœ¨ç³»ç»Ÿåˆå§‹åŒ–åç«‹å³ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç ï¼ˆç”¨æˆ·å: admin, å¯†ç : admin123ï¼‰ã€‚

### å‰ç«¯æ‰‹åŠ¨éƒ¨ç½²

#### Cloudflare Pages

1. å‡†å¤‡å‰ç«¯ä»£ç 

   ```bash
   cd CloudPaste/frontend
   npm install
   ```

2. é…ç½®ç¯å¢ƒå˜é‡
   åˆ›å»ºæˆ–ä¿®æ”¹ `.env.production` æ–‡ä»¶ï¼š

   ```
   VITE_BACKEND_URL=https://cloudpaste-backend.your-username.workers.dev
   VITE_APP_ENV=production
   VITE_ENABLE_DEVTOOLS=false
   ```

3. æ„å»ºå‰ç«¯é¡¹ç›®

   ```bash
   npm run build
   ```

4. éƒ¨ç½²åˆ° Cloudflare Pages

   **æ–¹æ³•ä¸€**ï¼šé€šè¿‡ Wrangler CLI

   ```bash
   npx wrangler pages deploy dist --project-name=cloudpaste-frontend
   ```

   **æ–¹æ³•äºŒ**ï¼šé€šè¿‡ Cloudflare Dashboard

   1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
   2. é€‰æ‹© "Pages"
   3. ç‚¹å‡» "Create a project" â†’ "Direct Upload"
   4. ä¸Šä¼  `dist` ç›®å½•å†…çš„æ–‡ä»¶
   5. è®¾ç½®é¡¹ç›®åç§°ï¼ˆå¦‚ "cloudpaste-frontend"ï¼‰
   6. ç‚¹å‡» "Save and Deploy"

#### Vercel

1. å‡†å¤‡å‰ç«¯ä»£ç 

   ```bash
   cd CloudPaste/frontend
   npm install
   ```

2. å®‰è£…å¹¶ç™»å½• Vercel CLI

   ```bash
   npm install -g vercel
   vercel login
   ```

3. é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¸ Cloudflare Pages ç›¸åŒ
4. æ„å»ºå¹¶éƒ¨ç½²

   ```bash
   vercel --prod
   ```

   æ ¹æ®æç¤ºé…ç½®é¡¹ç›®ã€‚

</details>

<details>
<summary><b>ğŸ‘‰ S3ç›¸å…³è·¨åŸŸé…ç½®æ•™ç¨‹</b></summary>

## R2 API ç›¸å…³è·å–åŠè·¨åŸŸé…ç½®

1. ç™»å½• Cloudflare Dashboard
2. ç‚¹å‡» R2 å­˜å‚¨ï¼Œåˆ›å»ºä¸€ä¸ªå­˜å‚¨æ¡¶ã€‚
3. åˆ›å»º API ä»¤ç‰Œ

<img src="./images/R2/R2-api.png" width="400"/>
<img src="./images/R2/R2-rw.png" width="400"/>

4. åˆ›å»ºåæŠŠå…¨éƒ¨æ•°æ®éƒ½ä¿å­˜å¥½ï¼Œåç»­è¦ç”¨
5. é…ç½®è·¨åŸŸè§„åˆ™ï¼Œç‚¹å‡»å¯¹åº”å­˜å‚¨æ¡¶ï¼Œç‚¹å‡»è®¾ç½®ï¼Œç¼–è¾‘ CORS ç­–ç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```json
[
  {
    "AllowedOrigins": ["http://localhost:3000", "https://æ ¹æ®è‡ªå·±çš„å‰ç«¯åŸŸåæ¥æ›¿ä»£"],
    "AllowedMethods": ["GET", "PUT", "POST", "DELETE", "HEAD"],
    "AllowedHeaders": ["*"],
    "ExposeHeaders": ["ETag"],
    "MaxAgeSeconds": 3600
  }
]
```

## B2 API ç›¸å…³è·å–åŠè·¨åŸŸé…ç½®

1. è‹¥æ²¡æœ‰ B2 è´¦å·ï¼Œå¯ä»¥å…ˆ[æ³¨å†Œ](https://www.backblaze.com/sign-up/cloud-storage?referrer=getstarted)ä¸€ä¸ªï¼Œç„¶ååˆ›å»ºä¸€ä¸ªå­˜å‚¨æ¡¶ã€‚
   <img src="./images/B2/B2-1.png" width="400"/>
2. ç‚¹å‡»ä¾§è¾¹æ çš„ Application Keyï¼Œç‚¹å‡» Create Keyï¼Œç„¶åå¦‚å›¾æ‰€ç¤ºã€‚
   <img src="./images/B2/B2-2.png" width="400"/>
3. é…ç½® B2 çš„è·¨åŸŸï¼ŒB2 è·¨åŸŸé…ç½®æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€æ³¨æ„
   <img src="./images/B2/B2-3.png" width="400"/>
4. å¯ä»¥å…ˆå°è¯•ä¸€ä¸‹ 1 æˆ– 2ï¼Œå»åˆ°ä¸Šä¼ é¡µé¢çœ‹çœ‹æ˜¯å¦èƒ½ä¸Šä¼ ï¼ŒF12 æ‰“å¼€æ§åˆ¶å°è‹¥æ˜¾ç¤ºè·¨åŸŸé”™è¯¯ï¼Œåˆ™ä½¿ç”¨ 3ã€‚è¦ä¸€åŠ³æ°¸é€¸å°±ç›´æ¥ä½¿ç”¨ 3ã€‚
   <img src="./images/B2/B2-4.png" width="400"/>

å…³äº 3 çš„é…ç½®ç”±äºé¢æ¿æ— æ³•é…ç½®ï¼Œåªèƒ½æ‰‹åŠ¨é…ç½®ï¼Œéœ€[ä¸‹è½½ B2 CLI](https://www.backblaze.com/docs/cloud-storage-command-line-tools)å¯¹åº”å·¥å…·ã€‚
ä¸‹è½½åï¼Œåœ¨å¯¹åº”ä¸‹è½½ç›®å½• cmdï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```txt
b2.exe account authorize   //è¿›è¡Œè´¦å·ç™»å½•ï¼Œæ ¹æ®æç¤ºå¡«å…¥ä¹‹å‰çš„ keyID å’Œ applicationKey
b2.exe bucket get <bucketName> //ä½ å¯ä»¥æ‰§è¡Œè·å–bucketä¿¡æ¯ï¼Œ<bucketName>æ¢æˆæ¡¶åå­—
```

è¿™é‡Œç”±äºæˆ‘æ˜¯ windows é…ç½®
æ‰€ä»¥åœ¨å¯¹åº” cli çš„ exe æ–‡ä»¶å¤¹ä¸­ cmd è¾“å…¥ï¼Œpython çš„ cli ä¹ŸåŒç†ï¼š

```cmd
b2.exe bucket update <bucketName> allPrivate --cors-rules "[{\"corsRuleName\":\"CloudPaste\",\"allowedOrigins\":[\"*\"],\"allowedHeaders\":[\"*\"],\"allowedOperations\":[\"b2_upload_file\",\"b2_download_file_by_name\",\"b2_download_file_by_id\",\"s3_head\",\"s3_get\",\"s3_put\",\"s3_post\",\"s3_delete\"],\"exposeHeaders\":[\"Etag\",\"content-length\",\"content-type\",\"x-bz-content-sha1\"],\"maxAgeSeconds\":3600}]"
```

å…¶ä¸­<bucketName>æ¢æˆä½ çš„å­˜å‚¨æ¡¶åå­—ï¼Œå…³äºå…è®¸è·¨åŸŸçš„åŸŸå allowedOrigins å¯ä»¥æ ¹æ®ä¸ªäººé…ç½®ï¼Œè¿™é‡Œæ˜¯å…è®¸æ‰€æœ‰ã€‚ 5. å·²å®Œæˆè·¨åŸŸé…ç½®

## æ›´å¤š S3 ç›¸å…³é…ç½®å¾…ç»­......

</details>

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯

- **æ¡†æ¶**: Vue.js 3 + Vite
- **æ ·å¼**: TailwindCSS
- **ç¼–è¾‘å™¨**: Vditor
- **å›½é™…åŒ–**: Vue-i18n
- **å›¾è¡¨**: Chart.js + Vue-chartjs

### åç«¯

- **è¿è¡Œæ—¶**: Cloudflare Workers
- **æ¡†æ¶**: Hono
- **æ•°æ®åº“**: Cloudflare D1 (SQLite)
- **å­˜å‚¨**: å¤š S3 å…¼å®¹æœåŠ¡ (æ”¯æŒ R2, B2, AWS S3)
- **è®¤è¯**: JWT ä»¤ç‰Œ + API å¯†é’¥

## ğŸ’» å¼€å‘

### API æ–‡æ¡£

[API æ–‡æ¡£](Api-doc.md)

### æœ¬åœ°å¼€å‘è®¾ç½®

1. **å…‹éš†é¡¹ç›®ä»“åº“**

   ```bash
   git clone https://github.com/ling-drag0n/cloudpaste.git
   cd cloudpaste
   ```

2. **åç«¯è®¾ç½®**

   ```bash
   cd backend
   npm install
   # åˆå§‹åŒ– D1 æ•°æ®åº“
   wrangler d1 create cloudpaste-db
   wrangler d1 execute cloudpaste-db --file=./schema.sql
   ```

3. **å‰ç«¯è®¾ç½®**

   ```bash
   cd frontend
   npm install
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**

   - åœ¨ `backend` ç›®å½•ä¸‹ï¼Œåˆ›å»º `wrangler.toml` æ–‡ä»¶è®¾ç½®å¼€å‘ç¯å¢ƒå˜é‡
   - åœ¨ `frontend` ç›®å½•ä¸‹ï¼Œé…ç½® `.env.development` æ–‡ä»¶è®¾ç½®å‰ç«¯ç¯å¢ƒå˜é‡

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

   ```bash
   # åç«¯
   cd backend
   npm run dev

   # å‰ç«¯ (å¦ä¸€ä¸ªç»ˆç«¯)
   cd frontend
   npm run dev
   ```

### é¡¹ç›®ç»“æ„

```
CloudPaste/
â”œâ”€â”€ frontend/                # å‰ç«¯ Vue.js åº”ç”¨
â”‚   â”œâ”€â”€ src/                 # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/      # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ api/             # API å®¢æˆ·ç«¯å’ŒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ i18n/            # å›½é™…åŒ–èµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ assets/          # é™æ€èµ„æº
â”‚   â””â”€â”€ ...
â””â”€â”€ backend/                 # Cloudflare Workers åç«¯
    â”œâ”€â”€ worker.js            # ä¸»è¦ Worker æ–‡ä»¶
    â”œâ”€â”€ schema.sql           # D1 æ•°æ®åº“æ¨¡å¼
    â””â”€â”€ ...
```

## ğŸ“„ è®¸å¯è¯

Apache License 2.0

æœ¬é¡¹ç›®ä½¿ç”¨ Apache License 2.0 è®¸å¯è¯ - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=ling-drag0n/CloudPaste&type=Date)](https://star-history.com/#ling-drag0n/CloudPaste&Date)

**å¦‚æœè§‰å¾—é¡¹ç›®ä¸é”™å¸Œæœ›æ‚¨èƒ½ç»™ä¸ªå…è´¹çš„starâœ¨âœ¨ï¼Œéå¸¸æ„Ÿè°¢ï¼**